var $R={mouseOffset:{},mouseDownTime:"",mouseUpTime:"",init:function(){this.createDom(),this.bindEvent(),public.init(),this.pvSend()},createDom:function(){var e=[];if(window.adsData){var t="",n=window.adsData.ads[0];n.clktk&&(t=n.clktk.join(",")),e.push('<img class="coverImg" style="width: '+w+"px; height: "+h+'px" src="'+n.img+'">'),e.push('<div class="mute-on"></div>'),e.push('<div class="mute-off"></div>'),e.push('<div class="video_item" style="width: '+w+"px; height: "+h+'px" data-clk="'+t+'" data-curl="'+n.curl+'">'),e.push('   <video id="video" autoplay preload loop muted src="'+n.video+'" style="width: '+w+"px; height: "+h+'px"></video>'),e.push("</div>"),e.push('<div class="title-desc">'+n.desc+"</div>"),$("#video-Content").html(e.join(""))}},pvSend:function(){var e=this;window.adsData&&window.adsData.adstk&&$.each(window.adsData.adstk,function(t,n){e.sendLog(n)})},sendLog:function(e){var t=new Image;t.onload=t.onerror=function(){t=null},t.src=e},bindEvent:function(){var e=this,t="off",n=typeof document.createElement("video").canPlayType!="undefined";n||$(".loading").hide(),$("#video").on("play",function(e){$(".coverImg").hide(),$(".loading").hide(),t==="off"?($(".mute-on").hide(),$(".mute-off").show()):t==="on"&&($(".mute-on").show(),$(".mute-off").hide())}),$(".mute-on").on("click",function(e){$("#video")[0].muted=!0,t="off",$(".mute-on").hide(),$(".mute-off").show()}),$(".mute-off").on("click",function(e){$("#video")[0].muted=!1,t="on",$(".mute-on").show(),$(".mute-off").hide()}),$(".coverImg, #video, .title-desc").on("mousedown",function(t){e.getOffset(t.clientX,t.clientY),e.mouseDownTime=(new Date).getTime()}),$(".coverImg, #video, .title-desc").on("click",function(){var t=$(".video_item").attr("data-clk"),n=$(".video_item").attr("data-curl");e.mouseUpTime=(new Date).getTime(),t&&(t=t.replace("__EVENT_TIME_START__",e.mouseDownTime).replace("__EVENT_TIME_END__",e.mouseUpTime).replace("__OFFSET_X__",parseInt(e.mouseOffset.x)).replace("__OFFSET_Y__",parseInt(e.mouseOffset.y)).replace("__ADSPACE_W__",w).replace("__ADSPACE_H__",h),$.each(t.split(","),function(t,n){e.sendLog(n)})),n=n.replace("__EVENT_TIME_START__",e.mouseDownTime).replace("__EVENT_TIME_END__",e.mouseUpTime).replace("__OFFSET_X__",parseInt(e.mouseOffset.x)).replace("__OFFSET_Y__",parseInt(e.mouseOffset.y)).replace("__ADSPACE_W__",w).replace("__ADSPACE_H__",h),window.open(n,"mediav"+e.mouseUpTime)}),window.addEventListener("message",function(e){e.data=="SEND_AD_IN_VIEW"&&$("#video")[0].play(),e.data=="SEND_AD_OUT_VIEW"&&$("#video")[0].pause()})},getOffset:function(e,t){var n=$("#video-Content")[0].getBoundingClientRect(),r=e-n.left,i=t-n.top;this.mouseOffset={x:r,y:i}}};$R.init();