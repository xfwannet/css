window.Messenger=(function(){var prefix="[PROJECT_NAME]",supportPostMessage="postMessage" in window;function Target(target,name){var errMsg="";if(arguments.length<2){errMsg="target error - target and name are both requied"}else{if(typeof target!="object"){errMsg="target error - target itself must be window object"}else{if(typeof name!="string"){errMsg="target error - target name must be string type"}}}if(errMsg){throw new Error(errMsg)}this.target=target;this.name=name}if(supportPostMessage){Target.prototype.send=function(msg){this.target.postMessage(prefix+msg,"*")}}else{Target.prototype.send=function(msg){var targetFunc=window.navigator[prefix+this.name];if(typeof targetFunc=="function"){targetFunc(prefix+msg,window)}else{throw new Error("target callback function is not defined")}}}function Messenger(messengerName,projectName){this.targets={};this.name=messengerName;this.listenFunc=[];prefix=projectName||prefix;this.initListen()}Messenger.prototype.addTarget=function(target,name){var targetObj=new Target(target,name);this.targets[name]=targetObj};Messenger.prototype.initListen=function(){var self=this;var generalCallback=function(msg){if(typeof msg=="object"&&msg.data){msg=msg.data}msg=msg.slice(prefix.length);for(var i=0;i<self.listenFunc.length;i++){self.listenFunc[i](msg)}};if(supportPostMessage){if("addEventListener" in document){window.addEventListener("message",generalCallback,false)}else{if("attachEvent" in document){window.attachEvent("onmessage",generalCallback)}}}else{window.navigator[prefix+this.name]=generalCallback}};Messenger.prototype.listen=function(callback){this.listenFunc.push(callback)};Messenger.prototype.clear=function(){this.listenFunc=[]};Messenger.prototype.send=function(msg){var targets=this.targets,target;for(target in targets){if(targets.hasOwnProperty(target)){targets[target].send(msg)}}};return Messenger})();function AdIframeLoad(id){var messenger=new Messenger("iframe"+id);messenger.addTarget(window.parent,"parent");messenger.targets["parent"].send(""+id)};