var public={firstPlay:!0,firstEnd:!0,totalPlaySeconds:0,playSeconds:0,upadteTime:0,mouseOffset:{},duration:"",isTailFrame:!1,replayTime:null,TailTime:!1,savePowerStatus:null,init:function(){this.isNil(window.adsData.vstarttk)&&(window.adsData.vstarttk=window.adsData.ads[0].vstarttk?window.adsData.ads[0].vstarttk:[""]),this.isNil(window.adsData.vpausetk)&&(window.adsData.vpausetk=window.adsData.ads[0].vpausetk?window.adsData.ads[0].vpausetk:[""]),this.isNil(window.adsData.vcontitk)&&(window.adsData.vcontitk=window.adsData.ads[0].vcontitk?window.adsData.ads[0].vcontitk:[""]),this.isNil(window.adsData.vexittk)&&(window.adsData.vexittk=window.adsData.ads[0].vexittk?window.adsData.ads[0].vexittk:[""]),this.isNil(window.adsData.vcomptk)&&(window.adsData.vcomptk=window.adsData.ads[0].vcomptk?window.adsData.ads[0].vcomptk:[""]),this.isNil(window.adsData.voptk)&&(window.adsData.voptk=window.adsData.ads[0].voptk?window.adsData.ads[0].voptk:[""]),this.adMark(),this.clickEvent(),public.savePowerStatus=public.getSavePowerStatus(),public.savePowerStatus||(this.videoEventListener($("#video")[0]),window.adsData.add_tail_frame&&($("#video")[0].loop=!1,this.isTailFrame=!0,this.tailFrame(),this.tailFrameStyle()))},getSavePowerStatus:function(){var e;try{e=external.GetSavePowerMode(external.GetSID(window))}catch(t){}return e=="smart"||e=="normal"||e=="enhanced"?($("#video")[0].autoplay=!1,$("body").find(".loading").remove().end().find(".coverImg").remove().end().find(".mute-on").remove().end().find(".mute-off").remove(),!0):!1},doDownTime:function(){if(public.savePowerStatus)return;var e='<!--<p class="downTime" style="position: absolute;top: 55px;right: 12px;margin:0;line-height: 19px;min-width: 26px;padding: 1px 2px;z-index: 112;background: #434343;border: 1px solid #FFFFFF;border-radius: 10px;font-size: 13px;color: #fff;text-align: center;"><span class="timeNum">--</p>-->';$(".video-wrap").css("position","relative"),$(".video-wrap").append(e)},tailFrame:function(){var e=window.adsData.icon.industry_button?window.adsData.icon.industry_button:"https://p4.ssl.qhimg.com/t01cc0af7453b9ab984.png",t='<div class="endContent"><img class="endTailImg" src="'+window.adsData.ads[0].img+'"/><div class="endFrame"><div class="tailButton"><p class="endDesc">'+window.adsData.ads[0].desc+'</p><p style="text-align:center;margin-top:15px;"><img class="tailActive" src="'+e+'"/></p></div></div></div>';$(".video_item").append(t)},tailFrameStyle:function(){$("head").append(function(){var e=[];return e.push("<style>"),e.push(".endContent p{margin:0;padding:0;}"),e.push(".endTailImg{width:100%;height:100%;position: absolute;left:0;top:0;}"),e.push(".endFrame{width:100%;height:100%;position:absolute;top:0;left:0;background:rgba(0,0,0,0.5)}"),e.push(".tailButton{position: absolute; width:80%;top: 50%;left: 50%;transform:translate(-50%,-50%);text-algin:center;}"),e.push(".tailActive{width:"+w*.26+"px;min-width:100px;}"),e.push(".endDesc{font-size:18px;font-weight:800;color:#fff;line-height:30px;height:60px;text-align:center;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;display:-webkit-box; -webkit-line-clamp: 2;-webkit-box-orient: vertical;*display: inline-block;}"),e.push("</style>"),e.join(" ")})},showTailFrame:function(){public.TailTime=!0,$(".endContent").show(),$(".bottom_Wrap").hide(),$(".title-desc").hide(),$(".mute-on").css("visibility","hidden"),$(".mute-off").css("visibility","hidden"),$(".bottom_bg").css("visibility","hidden")},hideTailFram:function(){public.TailTime=!1,$(".endContent").hide(),$(".bottom_Wrap").show(),$(".title-desc").show(),$(".mute-on").css("visibility","visible"),$(".mute-off").css("visibility","visible"),$(".bottom_bg").css("visibility","visible")},videoEventListener:function(e){e.addEventListener("durationchange",function(){public.duration=Math.round(e.duration),public.doDownTime()}),e.addEventListener("playing",function(){public.hideTailFram(),public.firstPlay&&(public.investigate(window.adsData.vstarttk[0],{adst:0,vtps:public.totalPlaySeconds,vps:public.playSeconds}),public.firstPlay=!1)}),e.addEventListener("timeupdate",function(){++public.upadteTime,public.playSeconds=Math.round(e.currentTime),public.playSeconds==public.duration&&public.firstEnd&&(public.firstEnd=!1,public.investigate(window.adsData.vcomptk[0],{adst:0,vtps:public.totalPlaySeconds,vps:public.playSeconds}));var t=public.duration-public.playSeconds>=0?public.duration-public.playSeconds:0,n="0"+t;$(".timeNum").html(n.slice(-2)),public.totalPlaySeconds=Math.floor(public.upadteTime/4)}),e.addEventListener("ended",function(){public.isTailFrame&&(public.replayTime&&clearInterval(public.replayTime),public.showTailFrame(),public.replayTime=setInterval(function(){e.play()},8e3))})},clickEvent:function(){$("body").on("click",function(e){e.target.className=="adMark"||e.target.className=="video-wrap"||e.target.className=="downTime"||e.target.className=="timeNum"?public.investigate(window.adsData.voptk[0],{vai:1,adst:0,vps:public.playSeconds,vtps:public.totalPlaySeconds,cpx:parseInt($R.mouseOffset.x),cpy:parseInt($R.mouseOffset.y),cs:$R.mouseDownTime,ce:$R.mouseUpTime}):e.target.className=="mute-off"||e.target.className=="mute-on"?public.investigate(window.adsData.voptk[0],{adst:0,vai:e.target.className=="mute-off"?5:6,vps:public.playSeconds,vtps:public.totalPlaySeconds,cpx:parseInt($R.mouseOffset.x),cpy:parseInt($R.mouseOffset.y),cs:$R.mouseDownTime,ce:$R.mouseUpTime}):e.target.className!="loading"&&($(e.target).parents(".endContent").length&&$R.openUrl(),public.investigate(window.adsData.voptk[0],{adst:public.TailTime?3:0,vai:2,vps:public.playSeconds,vtps:public.totalPlaySeconds,cpx:parseInt($R.mouseOffset.x),cpy:parseInt($R.mouseOffset.y),cs:$R.mouseDownTime,ce:$R.mouseUpTime}))})},adMark:function(){var e=window.adsData["Idtype"]==6?"https://p4.ssl.qhimg.com/t010aaf23d4ad7cde97.png":"https://cdn.jsdelivr.net/gh/xfwannet/css@master/lovezbbg.png";$(".video-wrap").append('<img src="'+e+'" class="adMark">'),window.adsData.src==="360\u641c\u7d22"&&$(".adMark").hide()},investigate:function(e,t){if(e=="NaN"||!e)return!1;t=t?t:{},t.adst=public.isNil(t.adst)?"__ADSIZE_TYPE__":t.adst,t.vai=public.isNil(t.vai)?"__VIDEO_ACTION_ID__":t.vai,t.vps=public.isNil(t.vps)?"__VIDEO_TIME__":t.vps,t.vtps=public.isNil(t.vtps)?"__VIDEO_DURATION__":t.vtps,t.cpx=public.isNil(t.cpx)?"__OFFSET_X__":t.cpx,t.cpy=public.isNil(t.cpy)?"__OFFSET_Y__":t.cpy,t.cs=public.isNil(t.cs)?"__EVENT_TIME_START__":t.cs,t.ce=public.isNil(t.ce)?"__EVENT_TIME_END__":t.ce,e=e.replace("__ADSIZE_TYPE__",t.adst).replace("__VIDEO_ACTION_ID__",t.vai).replace("__VIDEO_TIME__",t.vps).replace("__VIDEO_DURATION__",t.vtps).replace("__OFFSET_X__",t.cpx).replace("__OFFSET_Y__",t.cpy).replace("__EVENT_TIME_START__",t.cs).replace("__EVENT_TIME_END__",t.ce);var n=new Image;n.onload=n.onerror=function(){n=null},n.src=e},isNil:function(e){return e===null||e===undefined}};